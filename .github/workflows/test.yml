name: Txt Secret Test

on: [push]

jobs:
  test-secrets:
    # 這裡的邏輯：如果是 main 分支，就用 PRODUCTION 環境；否則用 DEV 環境
    environment: ${{ github.ref_name == 'master' && 'PRODUCTION' || 'DEV' }}
    
    runs-on: ubuntu-latest
    
    steps:
      - name: 檢查當前環境
        run: |
          echo "當前執行分支: ${{ github.ref_name }}"
          echo "使用的環境名稱: ${{ (github.ref_name == 'master' && 'PRODUCTION') || 'DEV' }}"

      - name: 測試 Secret 長度
        env:
          MY_KEY: ${{ secrets.pwd }}
        run: |
          if [ -z "$MY_KEY" ]; then
            echo "❌ 錯誤：無法讀取 ENV_KEY"
            exit 1
          else
            echo "✅ 成功：已讀取 $GITHUB_ENVIRONMENT 環境的 Secret"
            echo "字串長度為: ${MY_KEY}"
          fi


